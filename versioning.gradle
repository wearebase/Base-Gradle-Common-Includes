ext.getLatestTag = { ->
    return  "git describe --tags --abbrev=0".execute().text.trim()
}

ext.getCommitCountTotal = { ->
    def commitCount = "git rev-list HEAD --count".execute().text.trim()
    return (commitCount == "") ? "0" : commitCount
}

ext.getLatestCommitHash = { ->
    return "git rev-parse --short HEAD".execute().text.trim()
}

ext.getCommitCountLastTag = { ->
    def latestTagText = getLatestTag()
    return "git log ${latestTagText}..HEAD --oneline".execute().in.readLines().size()
}

ext.getPrettyVersionName = { ->
    def majorMinorVersion = getLatestTag()
    def commitCount = getCommitCountLastTag()
    return sprintf('%1$s.%2$s', [majorMinorVersion, commitCount])
}

ext.getPrettyVersionNameWithHash = { ->
    def versionName = getPrettyVersionName()
    def commitHash = getLatestCommitHash()
    return sprintf('%1$s-%2$s', [versionName, commitHash])
}
