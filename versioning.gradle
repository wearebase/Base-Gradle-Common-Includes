def getLatestTag = { ->
    return  "git describe --tags --abbrev=0".execute().text.trim()
}

def getCommitCountTotal = { ->
    return "git rev-list HEAD --count".execute().text.trim()
}

def getLatestCommitHash = { ->
    return "git rev-parse --short HEAD".execute().text.trim()
}

def getCommitCountLastTag = { ->
    def latestTagText = getLatestTag()
    return "git log ${latestTagText}..HEAD --oneline".execute().in.readLines().size()
}

def getPrettyVersionName = { ->
    def majorMinorVersion = getLatestTag()
    def commitCount = getCommitCountLastTag()
    return sprintf('%1$s.%2$s', [majorMinorVersion, commitCount])
}

def getPrettyVersionNameWithHash = { ->
    def versionName = getPrettyVersionName()
    def commitHash = getLatestCommitHash()
    return sprintf('%1$s-%2$s', [versionName, commitHash])
}
